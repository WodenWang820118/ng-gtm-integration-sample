import{b as $,j as B,k as R}from"./chunk-5VFJMGOC.js";import{a as j,b as f,c as I,d as q,g as L,i as V,j as w,k as M,l as G,m as H,n as U,o as k,p as O}from"./chunk-RTLSBLF3.js";import"./chunk-4PDZSTQS.js";import{a as T}from"./chunk-WM6QRSU2.js";import"./chunk-G7PQ22R5.js";import{Ca as c,Ea as x,Fa as D,Ga as r,Ha as i,Ia as p,Ta as E,Ua as g,aa as d,ba as C,cb as a,d as v,eb as N,gb as A,i as F,o as S,sa as s,wa as b}from"./chunk-XHDSLAJA.js";import{k as _,l as u,u as h}from"./chunk-YEGXVBAB.js";import"./chunk-OGBJ4DTI.js";function z(){return e=>{let t=e.value;if(t==null||t==="")return u(null);let n=parseFloat(t),o=!isNaN(n)&&n>=-90&&n<=90;return u(o?null:{invalidLatitude:!0})}}function J(){return e=>{let t=e.value;if(t==null||t==="")return u(null);let n=parseFloat(t),o=!isNaN(n)&&n>=-180&&n<=180;return u(o?null:{invalidLongitude:!0})}}var P=(()=>{let t=class t{constructor(o){this.http=o,this.jsonUrl="assets/countries.json"}getCountries(){return this.http.get(this.jsonUrl)}};t.\u0275fac=function(m){return new(m||t)(F(T))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Q=(()=>{let t=class t{constructor(){}upload(o){return h(()=>_(B($(R,"destinations"),{country:o.country,city:o.city,latitude:o.latitude,longitude:o.longitude,description:o.description})))}};t.\u0275fac=function(m){return new(m||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Y=(e,t)=>t.name.common;function Z(e,t){if(e&1&&(r(0,"option",6),a(1),i()),e&2){let n=t.$implicit;b("value",n.name.common),d(),N(" ",n.name.common," ")}}function tt(e,t){e&1&&(r(0,"div",7),a(1,"Country is required."),i())}function et(e,t){e&1&&(r(0,"div",7),a(1,"City is required."),i())}function it(e,t){e&1&&a(0," Latitude is required. ")}function ot(e,t){e&1&&a(0," Latitude must be between -90 and 90. ")}function nt(e,t){if(e&1&&(r(0,"div",7),s(1,it,1,0)(2,ot,1,0),i()),e&2){let n=g();d(),c(1,n.destinationForm.controls.latitude.hasError("required")?1:-1),d(),c(2,n.destinationForm.controls.latitude.hasError("invalidLatitude")?2:-1)}}function rt(e,t){e&1&&a(0," Longitude is required. ")}function at(e,t){e&1&&a(0," Longitude must be between -180 and 180. ")}function lt(e,t){if(e&1&&(r(0,"div",7),s(1,rt,1,0)(2,at,1,0),i()),e&2){let n=g();d(),c(1,n.destinationForm.controls.longitude.hasError("required")?1:-1),d(),c(2,n.destinationForm.controls.longitude.hasError("invalidLongitude")?2:-1)}}var bt=(()=>{let t=class t{constructor(o,m,l){this.fb=o,this.countriesDataService=m,this.firebaseDestinationUploadService=l,this.destinationForm=this.fb.group({country:["",f.required],city:["",f.required],latitude:["",f.required,z()],longitude:["",f.required,J()],description:[""]}),this.countriesDataService.getCountries().subscribe(y=>{this.countries=y})}addDestination(){if(this.destinationForm.invalid){console.log("Invalid form"),console.log(this.destinationForm.value),console.log(this.destinationForm.errors);return}else console.log(this.destinationForm.value),this.firebaseDestinationUploadService.upload(this.destinationForm.value).subscribe()}};t.\u0275fac=function(m){return new(m||t)(C(U),C(P),C(Q))},t.\u0275cmp=S({type:t,selectors:[["app-add-data"]],standalone:!0,features:[A],decls:33,vars:5,consts:[[1,"add-data"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-6","mb-3"],["for","country",1,"form-label"],["formControlName","country","id","country",1,"form-select"],[3,"value"],[1,"text-danger"],["for","city",1,"form-label"],["formControlName","city","id","city","aria-describedby","cityHelp",1,"form-control"],["for","lat",1,"form-label"],["formControlName","latitude","id","lat","aria-describedby","latHelp",1,"form-control"],["for","long",1,"form-label"],["formControlName","longitude","id","long","aria-describedby","longHelp",1,"form-control"],[1,"col-md-12","mb-3"],["for","description",1,"form-label"],["formControlName","description","id","description","rows","3",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(m,l){m&1&&(r(0,"div",0)(1,"form",1),E("ngSubmit",function(){return l.addDestination()}),r(2,"div",2)(3,"div",3)(4,"label",4),a(5,"Country"),i(),r(6,"select",5),x(7,Z,2,2,"option",6,Y),i(),s(9,tt,2,0,"div",7),i(),r(10,"div",3)(11,"label",8),a(12,"City"),i(),p(13,"input",9),s(14,et,2,0,"div",7),i()(),r(15,"div",2)(16,"div",3)(17,"label",10),a(18,"Latitude"),i(),p(19,"input",11),s(20,nt,3,2,"div",7),i(),r(21,"div",3)(22,"label",12),a(23,"Longitude"),i(),p(24,"input",13),s(25,lt,3,2,"div",7),i()(),r(26,"div",2)(27,"div",14)(28,"label",15),a(29,"Description (Optional)"),i(),p(30,"textarea",16),i()(),r(31,"button",17),a(32,"Submit"),i()()()),m&2&&(d(),b("formGroup",l.destinationForm),d(6),D(l.countries),d(2),c(9,l.destinationForm.controls.country.invalid&&l.destinationForm.controls.country.touched?9:-1),d(5),c(14,l.destinationForm.controls.city.invalid&&l.destinationForm.controls.city.touched?14:-1),d(6),c(20,l.destinationForm.controls.latitude.invalid&&l.destinationForm.controls.latitude.touched?20:-1),d(5),c(25,l.destinationForm.controls.longitude.invalid&&l.destinationForm.controls.longitude.touched?25:-1))},dependencies:[O,L,G,H,j,M,I,q,V,w,k]});let e=t;return e})();export{bt as AddDataComponent};
