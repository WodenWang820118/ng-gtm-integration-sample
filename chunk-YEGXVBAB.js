function mt(r,e){var t={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&e.indexOf(o)<0&&(t[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(r);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(r,o[n])&&(t[o[n]]=r[o[n]]);return t}function qr(r,e,t,o){function n(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function c(d){try{u(o.next(d))}catch(b){s(b)}}function f(d){try{u(o.throw(d))}catch(b){s(b)}}function u(d){d.done?i(d.value):n(d.value).then(c,f)}u((o=o.apply(r,e||[])).next())})}function Yr(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],o=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function L(r){return this instanceof L?(this.v=r,this):new L(r)}function Nr(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(r,e||[]),n,i=[];return n={},c("next"),c("throw"),c("return",s),n[Symbol.asyncIterator]=function(){return this},n;function s(x){return function(w){return Promise.resolve(w).then(x,b)}}function c(x,w){o[x]&&(n[x]=function(E){return new Promise(function(X,O){i.push([x,E,X,O])>1||f(x,E)})},w&&(n[x]=w(n[x])))}function f(x,w){try{u(o[x](w))}catch(E){R(i[0][3],E)}}function u(x){x.value instanceof L?Promise.resolve(x.value.v).then(d,b):R(i[0][2],x)}function d(x){f("next",x)}function b(x){f("throw",x)}function R(x,w){x(w),i.shift(),i.length&&f(i[0][0],i[0][1])}}function Gr(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Yr=="function"?Yr(r):r[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(i){t[i]=r[i]&&function(s){return new Promise(function(c,f){s=r[i](s),n(c,f,s.done,s.value)})}}function n(i,s,c,f){Promise.resolve(f).then(function(u){i({value:u,done:c})},s)}}var z=r=>r&&typeof r.length=="number"&&typeof r!="function";function p(r){return typeof r=="function"}function Z(r){return p(r?.then)}function Y(r){let t=r(o=>{Error.call(o),o.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var rr=Y(r=>function(t){r(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((o,n)=>`${n+1}) ${o.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function M(r,e){if(r){let t=r.indexOf(e);0<=t&&r.splice(t,1)}}var y=class r{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:o}=this;if(p(o))try{o()}catch(i){e=i instanceof rr?i.errors:[i]}let{_finalizers:n}=this;if(n){this._finalizers=null;for(let i of n)try{$r(i)}catch(s){e=e??[],s instanceof rr?e=[...e,...s.errors]:e.push(s)}}if(e)throw new rr(e)}}add(e){var t;if(e&&e!==this)if(this.closed)$r(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&M(t,e)}remove(e){let{_finalizers:t}=this;t&&M(t,e),e instanceof r&&e._removeParent(this)}};y.EMPTY=(()=>{let r=new y;return r.closed=!0,r})();var Ar=y.EMPTY;function er(r){return r instanceof y||r&&"closed"in r&&p(r.remove)&&p(r.add)&&p(r.unsubscribe)}function $r(r){p(r)?r():r.unsubscribe()}var g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var q={setTimeout(r,e,...t){let{delegate:o}=q;return o?.setTimeout?o.setTimeout(r,e,...t):setTimeout(r,e,...t)},clearTimeout(r){let{delegate:e}=q;return(e?.clearTimeout||clearTimeout)(r)},delegate:void 0};function tr(r){q.setTimeout(()=>{let{onUnhandledError:e}=g;if(e)e(r);else throw r})}function S(){}var Br=Tr("C",void 0,void 0);function Jr(r){return Tr("E",void 0,r)}function Kr(r){return Tr("N",r,void 0)}function Tr(r,e,t){return{kind:r,value:e,error:t}}var U=null;function N(r){if(g.useDeprecatedSynchronousErrorHandling){let e=!U;if(e&&(U={errorThrown:!1,error:null}),r(),e){let{errorThrown:t,error:o}=U;if(U=null,t)throw o}}else r()}function Hr(r){g.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=r)}var V=class extends y{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,er(e)&&e.add(this)):this.destination=Ee}static create(e,t,o){return new G(e,t,o)}next(e){this.isStopped?Fr(Kr(e),this):this._next(e)}error(e){this.isStopped?Fr(Jr(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Fr(Br,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ge=Function.prototype.bind;function Pr(r,e){return ge.call(r,e)}var jr=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(o){or(o)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(o){or(o)}else or(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){or(t)}}},G=class extends V{constructor(e,t,o){super();let n;if(p(e)||!e)n={next:e??void 0,error:t??void 0,complete:o??void 0};else{let i;this&&g.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),n={next:e.next&&Pr(e.next,i),error:e.error&&Pr(e.error,i),complete:e.complete&&Pr(e.complete,i)}):n=e}this.destination=new jr(n)}};function or(r){g.useDeprecatedSynchronousErrorHandling?Hr(r):tr(r)}function Se(r){throw r}function Fr(r,e){let{onStoppedNotification:t}=g;t&&q.setTimeout(()=>t(r,e))}var Ee={closed:!0,next:S,error:Se,complete:S};var $=typeof Symbol=="function"&&Symbol.observable||"@@observable";function v(r){return r}function Oe(...r){return Cr(r)}function Cr(r){return r.length===0?v:r.length===1?r[0]:function(t){return r.reduce((o,n)=>n(o),t)}}var m=(()=>{class r{constructor(t){t&&(this._subscribe=t)}lift(t){let o=new r;return o.source=this,o.operator=t,o}subscribe(t,o,n){let i=Ae(t)?t:new G(t,o,n);return N(()=>{let{operator:s,source:c}=this;i.add(s?s.call(i,c):c?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(o){t.error(o)}}forEach(t,o){return o=Qr(o),new o((n,i)=>{let s=new G({next:c=>{try{t(c)}catch(f){i(f),s.unsubscribe()}},error:i,complete:n});this.subscribe(s)})}_subscribe(t){var o;return(o=this.source)===null||o===void 0?void 0:o.subscribe(t)}[$](){return this}pipe(...t){return Cr(t)(this)}toPromise(t){return t=Qr(t),new t((o,n)=>{let i;this.subscribe(s=>i=s,s=>n(s),()=>o(i))})}}return r.create=e=>new r(e),r})();function Qr(r){var e;return(e=r??g.Promise)!==null&&e!==void 0?e:Promise}function Ie(r){return r&&p(r.next)&&p(r.error)&&p(r.complete)}function Ae(r){return r&&r instanceof V||Ie(r)&&er(r)}function nr(r){return p(r[$])}function ir(r){return Symbol.asyncIterator&&p(r?.[Symbol.asyncIterator])}function sr(r){return new TypeError(`You provided ${r!==null&&typeof r=="object"?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Te(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var fr=Te();function cr(r){return p(r?.[fr])}function pr(r){return Nr(this,arguments,function*(){let t=r.getReader();try{for(;;){let{value:o,done:n}=yield L(t.read());if(n)return yield L(void 0);yield yield L(o)}}finally{t.releaseLock()}})}function ur(r){return p(r?.getReader)}function h(r){if(r instanceof m)return r;if(r!=null){if(nr(r))return Pe(r);if(z(r))return Fe(r);if(Z(r))return je(r);if(ir(r))return Xr(r);if(cr(r))return Ce(r);if(ur(r))return ke(r)}throw sr(r)}function Pe(r){return new m(e=>{let t=r[$]();if(p(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Fe(r){return new m(e=>{for(let t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function je(r){return new m(e=>{r.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,tr)})}function Ce(r){return new m(e=>{for(let t of r)if(e.next(t),e.closed)return;e.complete()})}function Xr(r){return new m(e=>{Re(r,e).catch(t=>e.error(t))})}function ke(r){return Xr(pr(r))}function Re(r,e){var t,o,n,i;return qr(this,void 0,void 0,function*(){try{for(t=Gr(r);o=yield t.next(),!o.done;){let s=o.value;if(e.next(s),e.closed)return}}catch(s){n={error:s}}finally{try{o&&!o.done&&(i=t.return)&&(yield i.call(t))}finally{if(n)throw n.error}}e.complete()})}function _(r,e,t,o=0,n=!1){let i=e.schedule(function(){t(),n?r.add(this.schedule(null,o)):this.unsubscribe()},o);if(r.add(i),!n)return i}function kr(r){return p(r?.lift)}function a(r){return e=>{if(kr(e))return e.lift(function(t){try{return r(t,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function l(r,e,t,o,n){return new Rr(r,e,t,o,n)}var Rr=class extends V{constructor(e,t,o,n,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(f){e.error(f)}}:super._next,this._error=n?function(c){try{n(c)}catch(f){e.error(f)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function lr(r,e=0){return a((t,o)=>{t.subscribe(l(o,n=>_(o,r,()=>o.next(n),e),()=>_(o,r,()=>o.complete(),e),n=>_(o,r,()=>o.error(n),e)))})}function mr(r,e=0){return a((t,o)=>{o.add(r.schedule(()=>t.subscribe(o),e))})}function Zr(r,e){return h(r).pipe(mr(e),lr(e))}function re(r,e){return h(r).pipe(mr(e),lr(e))}function ee(r,e){return new m(t=>{let o=0;return e.schedule(function(){o===r.length?t.complete():(t.next(r[o++]),t.closed||this.schedule())})})}function te(r,e){return new m(t=>{let o;return _(t,e,()=>{o=r[fr](),_(t,e,()=>{let n,i;try{({value:n,done:i}=o.next())}catch(s){t.error(s);return}i?t.complete():t.next(n)},0,!0)}),()=>p(o?.return)&&o.return()})}function ar(r,e){if(!r)throw new Error("Iterable cannot be null");return new m(t=>{_(t,e,()=>{let o=r[Symbol.asyncIterator]();_(t,e,()=>{o.next().then(n=>{n.done?t.complete():t.next(n.value)})},0,!0)})})}function oe(r,e){return ar(pr(r),e)}function ne(r,e){if(r!=null){if(nr(r))return Zr(r,e);if(z(r))return ee(r,e);if(Z(r))return re(r,e);if(ir(r))return ar(r,e);if(cr(r))return te(r,e);if(ur(r))return oe(r,e)}throw sr(r)}function I(r,e){return e?ne(r,e):h(r)}var{isArray:Le}=Array,{getPrototypeOf:Me,prototype:Ue,keys:Ve}=Object;function hr(r){if(r.length===1){let e=r[0];if(Le(e))return{args:e,keys:null};if(De(e)){let t=Ve(e);return{args:t.map(o=>e[o]),keys:t}}}return{args:r,keys:null}}function De(r){return r&&typeof r=="object"&&Me(r)===Ue}function dr(r){return r&&p(r.schedule)}function Lr(r){return r[r.length-1]}function F(r){return p(Lr(r))?r.pop():void 0}function A(r){return dr(Lr(r))?r.pop():void 0}function ie(r,e){return typeof Lr(r)=="number"?r.pop():e}function D(r,e){return a((t,o)=>{let n=0;t.subscribe(l(o,i=>{o.next(r.call(e,i,n++))}))})}var{isArray:We}=Array;function ze(r,e){return We(e)?r(...e):r(e)}function j(r){return D(e=>ze(r,e))}function xr(r,e){return r.reduce((t,o,n)=>(t[o]=e[n],t),{})}function Ye(...r){let e=F(r),{args:t,keys:o}=hr(r),n=new m(i=>{let{length:s}=t;if(!s){i.complete();return}let c=new Array(s),f=s,u=s;for(let d=0;d<s;d++){let b=!1;h(t[d]).subscribe(l(i,R=>{b||(b=!0,u--),c[d]=R},()=>f--,void 0,()=>{(!f||!b)&&(u||i.next(o?xr(o,c):c),i.complete())}))}});return e?n.pipe(j(e)):n}var P=new m(r=>r.complete());function B(r){return r<=0?()=>P:a((e,t)=>{let o=0;e.subscribe(l(t,n=>{++o<=r&&(t.next(n),r<=o&&t.complete())}))})}function qe(r,e,t){let o=p(r)||e||t?{next:r,error:e,complete:t}:r;return o?a((n,i)=>{var s;(s=o.subscribe)===null||s===void 0||s.call(o);let c=!0;n.subscribe(l(i,f=>{var u;(u=o.next)===null||u===void 0||u.call(o,f),i.next(f)},()=>{var f;c=!1,(f=o.complete)===null||f===void 0||f.call(o),i.complete()},f=>{var u;c=!1,(u=o.error)===null||u===void 0||u.call(o,f),i.error(f)},()=>{var f,u;c&&((f=o.unsubscribe)===null||f===void 0||f.call(o)),(u=o.finalize)===null||u===void 0||u.call(o)}))}):v}function se(){return a((r,e)=>{let t=null;r._refCount++;let o=l(e,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount){t=null;return}let n=r._connection,i=t;t=null,n&&(!i||n===i)&&n.unsubscribe(),e.unsubscribe()});r.subscribe(o),o.closed||(t=r.connect())})}var K=class extends m{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,kr(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new y;let t=this.getSubject();e.add(this.source.subscribe(l(t,void 0,()=>{this._teardown(),t.complete()},o=>{this._teardown(),t.error(o)},()=>this._teardown()))),e.closed&&(this._connection=null,e=y.EMPTY)}return e}refCount(){return se()(this)}};var fe=Y(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var C=(()=>{class r extends m{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let o=new br(this,this);return o.operator=t,o}_throwIfClosed(){if(this.closed)throw new fe}next(t){N(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let o of this.currentObservers)o.next(t)}})}error(t){N(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:o}=this;for(;o.length;)o.shift().error(t)}})}complete(){N(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:o,isStopped:n,observers:i}=this;return o||n?Ar:(this.currentObservers=null,i.push(t),new y(()=>{this.currentObservers=null,M(i,t)}))}_checkFinalizedStatuses(t){let{hasError:o,thrownError:n,isStopped:i}=this;o?t.error(n):i&&t.complete()}asObservable(){let t=new m;return t.source=this,t}}return r.create=(e,t)=>new br(e,t),r})(),br=class extends C{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.next)===null||o===void 0||o.call(t,e)}error(e){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.error)===null||o===void 0||o.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,o;return(o=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&o!==void 0?o:Ar}};var Mr=class extends C{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:o}=this;if(e)throw t;return this._throwIfClosed(),o}next(e){super.next(this._value=e)}};var Ur={now(){return(Ur.delegate||Date).now()},delegate:void 0};var yr=class extends y{constructor(e,t){super()}schedule(e,t=0){return this}};var H={setInterval(r,e,...t){let{delegate:o}=H;return o?.setInterval?o.setInterval(r,e,...t):setInterval(r,e,...t)},clearInterval(r){let{delegate:e}=H;return(e?.clearInterval||clearInterval)(r)},delegate:void 0};var vr=class extends yr{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var o;if(this.closed)return this;this.state=e;let n=this.id,i=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,o=0){return H.setInterval(e.flush.bind(e,this),o)}recycleAsyncId(e,t,o=0){if(o!=null&&this.delay===o&&this.pending===!1)return t;t!=null&&H.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let o=this._execute(e,t);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o=!1,n;try{this.work(e)}catch(i){o=!0,n=i||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),n}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:o}=t;this.work=this.state=this.scheduler=null,this.pending=!1,M(o,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var J=class r{constructor(e,t=r.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,o){return new this.schedulerActionCtor(this,e).schedule(o,t)}};J.now=Ur.now;var _r=class extends J{constructor(e,t=J.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let o;this._active=!0;do if(o=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,o){for(;e=t.shift();)e.unsubscribe();throw o}}};var Q=new _r(vr),ce=Q;function Vr(...r){let e=A(r);return I(r,e)}function Ne(r,e){let t=p(r)?r:()=>r,o=n=>n.error(t());return new m(e?n=>e.schedule(o,0,n):o)}function Ge(r){return!!r&&(r instanceof m||p(r.lift)&&p(r.subscribe))}var W=Y(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function pe(r){return r instanceof Date&&!isNaN(r)}function $e(...r){let e=A(r),t=F(r),{args:o,keys:n}=hr(r);if(o.length===0)return I([],e);let i=new m(Be(o,e,n?s=>xr(n,s):v));return t?i.pipe(j(t)):i}function Be(r,e,t=v){return o=>{ue(e,()=>{let{length:n}=r,i=new Array(n),s=n,c=n;for(let f=0;f<n;f++)ue(e,()=>{let u=I(r[f],e),d=!1;u.subscribe(l(o,b=>{i[f]=b,d||(d=!0,c--),c||o.next(t(i.slice()))},()=>{--s||o.complete()}))},o)},o)}}function ue(r,e,t){r?_(t,r,e):e()}function le(r,e,t,o,n,i,s,c){let f=[],u=0,d=0,b=!1,R=()=>{b&&!f.length&&!u&&e.complete()},x=E=>u<o?w(E):f.push(E),w=E=>{i&&e.next(E),u++;let X=!1;h(t(E,d++)).subscribe(l(e,O=>{n?.(O),i?x(O):e.next(O)},()=>{X=!0},void 0,()=>{if(X)try{for(u--;f.length&&u<o;){let O=f.shift();s?_(e,s,()=>w(O)):w(O)}R()}catch(O){e.error(O)}}))};return r.subscribe(l(e,x,()=>{b=!0,R()})),()=>{c?.()}}function T(r,e,t=1/0){return p(e)?T((o,n)=>D((i,s)=>e(o,i,n,s))(h(r(o,n))),t):(typeof e=="number"&&(t=e),a((o,n)=>le(o,n,r,t)))}function wr(r=1/0){return T(v,r)}function me(){return wr(1)}function k(...r){return me()(I(r,A(r)))}function Je(r){return new m(e=>{h(r()).subscribe(e)})}var Ke=["addListener","removeListener"],He=["addEventListener","removeEventListener"],Qe=["on","off"];function Dr(r,e,t,o){if(p(t)&&(o=t,t=void 0),o)return Dr(r,e,t).pipe(j(o));let[n,i]=rt(r)?He.map(s=>c=>r[s](e,c,t)):Xe(r)?Ke.map(ae(r,e)):Ze(r)?Qe.map(ae(r,e)):[];if(!n&&z(r))return T(s=>Dr(s,e,t))(h(r));if(!n)throw new TypeError("Invalid event target");return new m(s=>{let c=(...f)=>s.next(1<f.length?f:f[0]);return n(c),()=>i(c)})}function ae(r,e){return t=>o=>r[t](e,o)}function Xe(r){return p(r.addListener)&&p(r.removeListener)}function Ze(r){return p(r.on)&&p(r.off)}function rt(r){return p(r.addEventListener)&&p(r.removeEventListener)}function he(r,e,t){return t?he(r,e).pipe(j(t)):new m(o=>{let n=(...s)=>o.next(s.length===1?s[0]:s),i=r(n);return p(e)?()=>e(n,i):void 0})}function Wr(r=0,e,t=ce){let o=-1;return e!=null&&(dr(e)?t=e:o=e),new m(n=>{let i=pe(r)?+r-t.now():r;i<0&&(i=0);let s=0;return t.schedule(function(){n.closed||(n.next(s++),0<=o?this.schedule(void 0,o):n.complete())},i)})}function et(...r){let e=A(r),t=ie(r,1/0),o=r;return o.length?o.length===1?h(o[0]):wr(t)(I(o,e)):P}var tt=new m(S);var{isArray:ot}=Array;function gr(r){return r.length===1&&ot(r[0])?r[0]:r}function Sr(r,e){return a((t,o)=>{let n=0;t.subscribe(l(o,i=>r.call(e,i,n++)&&o.next(i)))})}function nt(...r){return r=gr(r),r.length===1?h(r[0]):new m(it(r))}function it(r){return e=>{let t=[];for(let o=0;t&&!e.closed&&o<r.length;o++)t.push(h(r[o]).subscribe(l(e,n=>{if(t){for(let i=0;i<t.length;i++)i!==o&&t[i].unsubscribe();t=null}e.next(n)})))}}function st(...r){let e=F(r),t=gr(r);return t.length?new m(o=>{let n=t.map(()=>[]),i=t.map(()=>!1);o.add(()=>{n=i=null});for(let s=0;!o.closed&&s<t.length;s++)h(t[s]).subscribe(l(o,c=>{if(n[s].push(c),n.every(f=>f.length)){let f=n.map(u=>u.shift());o.next(e?e(...f):f),n.some((u,d)=>!u.length&&i[d])&&o.complete()}},()=>{i[s]=!0,!n[s].length&&o.complete()}));return()=>{n=i=null}}):P}function de(r){return a((e,t)=>{let o=null,n=!1,i;o=e.subscribe(l(t,void 0,void 0,s=>{i=h(r(s,de(r)(e))),o?(o.unsubscribe(),o=null,i.subscribe(t)):n=!0})),n&&(o.unsubscribe(),o=null,i.subscribe(t))})}function xe(r,e,t,o,n){return(i,s)=>{let c=t,f=e,u=0;i.subscribe(l(s,d=>{let b=u++;f=c?r(f,d,b):(c=!0,d),o&&s.next(f)},n&&(()=>{c&&s.next(f),s.complete()})))}}function gf(r,e){return p(e)?T(r,e,1):T(r,1)}function be(r){return new m(e=>r.subscribe(e))}var ft={connector:()=>new C};function Er(r,e=ft){let{connector:t}=e;return a((o,n)=>{let i=t();h(r(be(i))).subscribe(n),n.add(o.subscribe(i))})}function ct(r,e=Q){return a((t,o)=>{let n=null,i=null,s=null,c=()=>{if(n){n.unsubscribe(),n=null;let u=i;i=null,o.next(u)}};function f(){let u=s+r,d=e.now();if(d<u){n=this.schedule(void 0,u-d),o.add(n);return}c()}t.subscribe(l(o,u=>{i=u,s=e.now(),n||(n=e.schedule(f,r),o.add(n))},()=>{c(),o.complete()},void 0,()=>{i=n=null}))})}function Or(r){return a((e,t)=>{let o=!1;e.subscribe(l(t,n=>{o=!0,t.next(n)},()=>{o||t.next(r),t.complete()}))})}function ye(){return a((r,e)=>{r.subscribe(l(e,S))})}function ve(r){return D(()=>r)}function zr(r,e){return e?t=>k(e.pipe(B(1),ye()),t.pipe(zr(r))):T((t,o)=>h(r(t,o)).pipe(B(1),ve(t)))}function rc(r,e=Q){let t=Wr(r,e);return zr(()=>t)}function Ir(r=pt){return a((e,t)=>{let o=!1;e.subscribe(l(t,n=>{o=!0,t.next(n)},()=>o?t.complete():t.error(r())))})}function pt(){return new W}function cc(...r){return e=>k(e,Vr(...r))}function lc(r){return a((e,t)=>{try{e.subscribe(t)}finally{t.add(r)}})}function ut(r,e){let t=arguments.length>=2;return o=>o.pipe(r?Sr((n,i)=>r(n,i,o)):v,B(1),t?Or(e):Ir(()=>new W))}function _e(r){return r<=0?()=>P:a((e,t)=>{let o=[];e.subscribe(l(t,n=>{o.push(n),r<o.length&&o.shift()},()=>{for(let n of o)t.next(n);t.complete()},void 0,()=>{o=null}))})}function Fc(r,e){let t=arguments.length>=2;return o=>o.pipe(r?Sr((n,i)=>r(n,i,o)):v,_e(1),t?Or(e):Ir(()=>new W))}function we(r,e){let t=p(r)?r:()=>r;return p(e)?Er(e,{connector:t}):o=>new K(o,t)}function Dc(r){return r?e=>Er(r)(e):e=>we(new C)(e)}function qc(r,e){return a(xe(r,e,arguments.length>=2,!0))}function Jc(...r){let e=A(r);return a((t,o)=>{(e?k(r,t,e):k(r,t)).subscribe(o)})}function lt(r,e){return a((t,o)=>{let n=null,i=0,s=!1,c=()=>s&&!n&&o.complete();t.subscribe(l(o,f=>{n?.unsubscribe();let u=0,d=i++;h(r(f,d)).subscribe(n=l(o,b=>o.next(e?e(f,b,d,u++):b),()=>{n=null,c()}))},()=>{s=!0,c()}))})}function np(r){return a((e,t)=>{h(r).subscribe(l(t,()=>t.complete(),S)),!t.closed&&e.subscribe(t)})}function mp(...r){let e=F(r);return a((t,o)=>{let n=r.length,i=new Array(n),s=r.map(()=>!1),c=!1;for(let f=0;f<n;f++)h(r[f]).subscribe(l(o,u=>{i[f]=u,!c&&!s[f]&&(s[f]=!0,(c=s.every(v))&&(s=null))},S));t.subscribe(l(o,f=>{if(c){let u=[f,...i];o.next(e?e(...u):u)}}))})}export{y as a,Oe as b,m as c,se as d,K as e,C as f,Mr as g,P as h,mt as i,qr as j,I as k,Vr as l,Ne as m,Ge as n,W as o,D as p,$e as q,T as r,wr as s,k as t,Je as u,Ye as v,Dr as w,he as x,Wr as y,et as z,tt as A,Sr as B,nt as C,st as D,de as E,gf as F,ct as G,Or as H,B as I,ve as J,rc as K,cc as L,lc as M,ut as N,_e as O,Fc as P,Dc as Q,qc as R,Jc as S,lt as T,np as U,qe as V,mp as W};
